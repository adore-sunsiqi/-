# 1、SQL注入攻击

定义：应用程序和数据库之间的安全漏洞，是用户在输入的字符串中注入SQL指令。

注入点检测：通过在URL栏输入 '、and 1=1、or 1=1、and sleep(1)，如果报错或者页面不一致，则可能存在注入点。

后台登陆万能密码：'or 1=1--；'or '1'='1；''or 1=1--。

一句话shell：root；绝对路径；写入权限。

整数型：

字符型：

搜索型：order by

BOOL盲注：检测盲注：符号 and 1=2 %23，符号 and sleep(3) %23。

时间盲注：

HTTP头注入：cookie｜user-agent

工具：SQLmap

防范：1、用户权限；2、字符转换，过滤；3、使用安全参数；4、数据库信息加密。

# 2、XSS跨站脚本攻击

原理：在HTML页面注入恶意代码

检测：通过<script>标签。<script>alert(' ')</script>是否弹框。

角色：攻击者、目标服务器、受害者浏览器

1、反射型XSS：非持久型；

原理：从目标服务器通过错误信息、搜索结果等方式反射回来。发送请求时，XSS代码出现在URL中，作为输入提交到服务器，服务器解析后响应，传回浏览器后，浏览器解析执行。动态页面；一次性；通过点击链接发动攻击。

攻击方式：通过电子邮件等方式发送恶意的URL链接。

特点：即时性，不经过服务器存储，通过HTTP的GET和POST请求即可发动攻击。

防范：1、渲染内容来自服务器；2、不要从URL等DOM.API中获取数据直接渲染；3、不要使用eval等可执行字符串方法；4、对字符串参数做escape转义。

2、存储型XSS：持久型；危害最大；

原理：攻击脚本永久存放在服务器端的数据库、文件、内存等。多见于Form表单提交等交互功能，如论坛。

危害：持久型；DDos攻击的肉鸡；盗取敏感信息。

防范：入库前数据做转义处理；渲染页面DOM时做转义处理。

3、DOM-BASED型XSS：

客户端的脚本程序可以动态的检查和修改页面内容，而不依赖于服务器的数据。

4、字符集XSS：

原理：由于浏览器在Meta没有指定charset的时候存在自动识别编码的机制。web字符集不固定，输入非期望字符，可能会绕过转义过滤规则。

防范：1、记住指定的<meta charset = “utf-8”>；2、XML中指定字符集为utf-8，且标签要闭合。

5、flash XSS：

原理：AS脚本可以接受用户输入并操作cookie，攻击者配合其他XSS攻击方法将恶意的swf文件嵌入到页面中，AS和JS存在传参交互，通过XSS注入篡改参数，窃取cookie。

防范：1、严格管理cookie的读写权限；2、参数过滤转义。

6、未验证的跳转XSS：

原理：后端要对一个传入的待跳转的URL参数进行一个302跳转，跳转地址来自于用户的输入。

防范：1、URL参数做白名单或者规则过滤；2、cookie来源验证。

# 3、XXE XML外部实体注入攻击

原理：外部实体可被引用，服务器没有对代码进行过滤而直接解析。

防范：过滤或者禁止加载外部实体。

检测：有text/xml存在，则可能存在XXE漏洞。

如果没有回显，就进行盲化测试，blind XXE回显到vps上。

# 4、反序列化

Java序列化：Java对象转换为字节序列的过程，便于保存在文件、内存、数据库中。ObjectOutputStream 类的 WriteObject()方法可实现序列化。

Java反序列化：把字节序列恢复为Java对象的过程。ObjectInputStream 类的 ReadObject()方法可实现反序列化。

原理：Java应用对用户输入不做限制，即对不可信数据做了反序列化处理，攻击者通过构造恶意代码，让反序列化产生非预期对象，则可能带来任意代码执行RCE。漏洞利用的关键在于Java标准库和第三方公共类库。

过程：反序列化入口+目标方法+利用链。Java反序列化攻击：寻找重写了ReadObject()方法的类，利用Java反射机制，构造利用链。

经典利用链：commons-collections collection

# 5、HTTPS抓包

1、使用代理：Fiddler、burpsuite；2、自签名证书。

# 6、中间人攻击

原理：Alice <---------> Eve <----------->Bob。Alice和Bob的通信被攻击者Eve获取。常发生在网络加密通信中，如HTTPS、SSH等。常用的技术手段：ARP欺骗；DNS欺骗；公共Wi-Fi窃听；SSL剥离。

# 7、正向shell和反向shell

正向shell：攻击者连接被攻击者机器，攻击者在内网，被攻击者在公网。

反向shell：被攻击者主动连接攻击者，攻击者在外网，被攻击者在内网。

# 8、正向代理和反向代理

正向代理：客户端代理，隐藏申请服务的客户端。

反向代理：服务器端代理，隐藏提供服务的服务器。

# 9、如何判断目标操作系统？

1、大小写检测：Windows操作系统对大小写不敏感；Linux系统对大小写敏感。

2、ping命令：TTL>100 是windows；TTL<100 是Linux。

# 10、第一个小时你遭到了同一个IP的数百次攻击，但攻击无效；接下来两个小时，你遭到了不同IP的数百次攻击，但也没有成功。你的反应动作是？

同一个IP：攻击者可能正在使用蠕虫或者自动化工具进行大规模的扫描，寻找漏洞并尝试攻击。反应动作：可以通过防火墙封禁IP，关闭某些端口。

不同IP：分布式攻击，攻击者使用多个代理或者僵尸计算机（DDos的肉鸡）进行攻击，以隐藏真实身份。
